<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    * {
      box-sizing: border-box;
      margin:0;
      padding:0;
    }
    html, body {
      width:100vw;
      height:900vh;
      background:black;
      color: white;
      font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    }
    img {
      width:100%;
      height:100%;
      object-fit:cover;
    }
    nav {
      position: absolute;
      top:0;
      left:0;
      width:100vw;
      padding:1.5em;
      display:flex;
      justify-content:space-between;
      align-items: center;
      z-index:2;
    }
    p#logo {
      text-transform: uppercase;
      font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
      font-weight:900;
    }
    button {
      border:none;
      outline: none;
      font-weight: 500;
      color: #000;
      padding:0.75em 1em;
      background: #fff;
      border-radius: .25em;
    }
    section {
      position: relative;
      width:100vw;
      height:100vh;
      overflow:hidden;
    }
    .intro {
      background: url('https://picsum.photos/1200/300') no-repeat 50% 50%;
      background-size: cover;
    }
    .outro {
      display:flex;
      justify-content:center;
      align-items: center;
      background: linear-gradient(180deg, #000, #364549);
      background-size: 200% 200%;
    }
    .outro p {
      width:75%;
      text-align:center;
      color: #fff;
      font-size: 52px;
      font-weight:400;
      line-height: 1.125;
    }
    .outro p span {
      color: #75e1ff;
    }
    .cards {
      position: absolute;
      top: 25%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 150vw;
      height: 600px;
      will-change: transform;
    }
    .card {
      position: absolute;
      width: 500px;
      height: 550px;
      top: 50%;
      left: 50%;
      transform-origin: center center;
      margin-left: -250px;
      display:flex;
      flex-direction: column;
      gap: 1em;
      will-change: transform;
    }
    .card-img {
      flex:1;
      border-radius: .5em;
      overflow: hidden;
    }
    .card-content {
      width:100%;
      height:60px;
    }
    .card-content p {
      text-align:left;
      color:#fff;
      font-size: 16px;
      font-weight:500;
      line-height:1.25;
    }
    .step-counter {
      position: absolute;
      display:flex;
      flex-direction: column;
      margin:2em;
    }
    .counter-title, .count {
      position:relative;
      width:1200px;
      height: 150px;
      clip-path: polygon(0 0, 100% 0, 100% 100%, 0% 100%);
      overflow:hidden;
    }
    .count {
      top:-10px;
    }
    .count-container {
      position: relative;
      transform: translateY(150px);
      will-change: transform;
    }
    .step-counter h2 {
      width:100%;
      position: relative;
      color: #fff;
      text-transform: uppercase;
      font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
      font-weight: 900;
      font-size: 150px;
      line-height:1;
      letter-spacing: -0.04em;
      will-change:transform;
    }
    .empty {
      opacity: 0;
    }
    @media (max-width: 900px) {
      .counter-title {
        height:30px;
      }
      .counter-title h2 {
        font-size: 30px;
      }
      .count {
        top: 0px;
        left: -10px;
      }
      .cards {
        top: 27.5%;
      }
      .card {
        width:375px;
        height:500px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
<nav>
  <p id="logo">Voxel</p>
  <button>Download Now</button>
</nav>
<section class="intro"></section>
<section class="steps">
  <div class="step-counter">
    <div class="counter-title">
      <h2>Steps</h2>
    </div>
    <div class="count">
      <div class="count-container">
        <h2>01</h2>
        <h2>02</h2>
        <h2>03</h2>
        <h2>04</h2>
        <h2>05</h2>
      </div>
    </div>
  </div>
  <div class="cards">
    <div class="card">
      <div class="card-img">
        <img src="https://picsum.photos/id/237/200/300" alt="">
      </div>
      <div class="card-content">
        <p>In dapibus odio eget auctor tempor. Vestibulum ut porta augue, non tempus ante. Pellentesque venenatis porta pellentesque. Donec porttitor nec sem eu tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus sit amet purus ornare, placerat nibh id, faucibus erat. Maecenas lobortis vulputate erat nec fermentum. Aliquam sit amet magna quam. Donec id felis eu arcu sagittis pretium. Nunc maximus, quam et bibendum gravida, arcu mi ultricies massa, et efficitur lacus lacus sit amet tortor. Ut commodo fermentum libero, eget placerat nibh bibendum et.</p>
      </div>
    </div>
     <div class="card">
      <div class="card-img">
        <img src="https://picsum.photos/201/300" alt="">
      </div>
      <div class="card-content">
        <p>In dapibus odio eget auctor tempor. Vestibulum ut porta augue, non tempus ante. Pellentesque venenatis porta pellentesque. Donec porttitor nec sem eu tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus sit amet purus ornare, placerat nibh id, faucibus erat. Maecenas lobortis vulputate erat nec fermentum. Aliquam sit amet magna quam. Donec id felis eu arcu sagittis pretium. Nunc maximus, quam et bibendum gravida, arcu mi ultricies massa, et efficitur lacus lacus sit amet tortor. Ut commodo fermentum libero, eget placerat nibh bibendum et.</p>
      </div>
    </div>
     <div class="card">
      <div class="card-img">
        <img src="https://picsum.photos/200/302" alt="">
      </div>
      <div class="card-content">
        <p>In dapibus odio eget auctor tempor. Vestibulum ut porta augue, non tempus ante. Pellentesque venenatis porta pellentesque. Donec porttitor nec sem eu tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus sit amet purus ornare, placerat nibh id, faucibus erat. Maecenas lobortis vulputate erat nec fermentum. Aliquam sit amet magna quam. Donec id felis eu arcu sagittis pretium. Nunc maximus, quam et bibendum gravida, arcu mi ultricies massa, et efficitur lacus lacus sit amet tortor. Ut commodo fermentum libero, eget placerat nibh bibendum et.</p>
      </div>
    </div>
     <div class="card">
      <div class="card-img">
        <img src="https://picsum.photos/202/300" alt="">
      </div>
      <div class="card-content">
        <p>In dapibus odio eget auctor tempor. Vestibulum ut porta augue, non tempus ante. Pellentesque venenatis porta pellentesque. Donec porttitor nec sem eu tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus sit amet purus ornare, placerat nibh id, faucibus erat. Maecenas lobortis vulputate erat nec fermentum. Aliquam sit amet magna quam. Donec id felis eu arcu sagittis pretium. Nunc maximus, quam et bibendum gravida, arcu mi ultricies massa, et efficitur lacus lacus sit amet tortor. Ut commodo fermentum libero, eget placerat nibh bibendum et.</p>
      </div>
    </div>
     <div class="card">
      <div class="card-img">
        <img src="https://picsum.photos/201/300" alt="">
      </div>
      <div class="card-content">
        <p>In dapibus odio eget auctor tempor. Vestibulum ut porta augue, non tempus ante. Pellentesque venenatis porta pellentesque. Donec porttitor nec sem eu tristique. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Phasellus sit amet purus ornare, placerat nibh id, faucibus erat. Maecenas lobortis vulputate erat nec fermentum. Aliquam sit amet magna quam. Donec id felis eu arcu sagittis pretium. Nunc maximus, quam et bibendum gravida, arcu mi ultricies massa, et efficitur lacus lacus sit amet tortor. Ut commodo fermentum libero, eget placerat nibh bibendum et.</p>
      </div>
    </div>
    <div class="card empty"></div>
    <div class="card empty"></div>
  </div>

</section>
<section class="outro">
  <p>This is the <span>outra text that we see</span> after all the cards. It is super cool and fun to read.</p>
</section>

  </div>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/ScrollTrigger.min.js"></script>
<script src="https://unpkg.com/lenis@1.3.1/dist/lenis.min.js"></script> 
<script>
 document.addEventListener("DOMContentLoaded", (event) => {
  gsap.registerPlugin(ScrollTrigger)
  const lenis = new Lenis();
  lenis.on('scroll', ScrollTrigger.update);
  gsap.ticker.add((time) => {
    lenis.raf(time * 1000);
  });
  
  gsap.ticker.lagSmoothing(0);


 const stickySection = document.querySelector('.steps');
 const stickyHeight = window.innerHeight * 7;
 const cards = document.querySelectorAll('.cards');
 const countContainer = document.querySelector('.count-container');
 const totalCards = cards.length;

 ScrollTrigger.create({
  trigger: stickySection,
  start: 'top top',
  end: '+=${stickyHeight}px',
  pin: true,
  pinSpacing: true,
  markers: true,
  onUpdate: (self) => {
    positionCards(self.progress);
  },
 });

 const getRadius = () => {
  return window.innerWidth < 900
  ? window.innerWidth * 7.5
  : window.innerWidth * 2.5;
 };

 const arcAngle = Math.PI * 0.4;
 const startAngle = Math.PI / 2 - arcAngle / 2;

 function positionCards(progress = 0) {
  const radius = getRadius();
  const totalTravel = 1 + totalCards / 7.5;
  const adjustedProgress = (progress * totalTravel - 1) * 0.75;

  cards.forEach((card, i) => {
    const normalizedProgress = (totalCards - 1 - i) / totalCards;
    const cardProgress = normalizedProgress + adjustedProgress;
    const angle = startAngle + arcAngle * cardProgress;

    const x = Math.cos(angle) * radius;
    const y = Math.sin(angle) * radius;
    const rotation = (angle - Math.PI / 2) * (180 / Math.PI);

    gsap.set(card, {
      x: x,
      y: -y + radius,
      rotation: -rotation,
      transformOrigin: 'center center'
    });
  });
 }
 let currentCardIndex = 0;

 const options = {
  root: null,
  rootMargin: '0% 0%',
  threshold: 0.5,
 };

const observer = new IntersectionObserver((entries) => {
  entries.forEach((entry) => {
    if (entry.isIntersection) {
      lastScrollY = window.scrollY;

      let cardIndex = Array.from(cards).indexOf(entry.target);

      currentCardIndex = cardIndex;

      const targetY = 150 - currentCardIndex * 150;
      gsap.to(countContainer, {
        y: targetY,
        duration: 0.3,
        ease: 'power1.out',
        overwrite: true,
      });
    }
  });
}, options);

cards.forEach((card) => {
  observer.observe(card);
});

window.addEventListener('resize', () => positionCards(0));

  });   

   positionCards(0);

</script>
</body>
</html>